import{n as e,t}from"./index-CmL1eryK.js";var n=e();function r(e){return!e||typeof e!=`string`?!1:/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.trim())}function i(e){if(!e||typeof e!=`string`)return!1;let t=/^[\d\s\-+()]+$/,n=e.replace(/\D/g,``);return t.test(e)&&n.length>=10}function a(e){return e==null?!1:typeof e==`string`&&e.trim().length>0}function o(e=`This field is required`){return t=>{if(!a(t))return e}}function s(e=`Please enter a valid email address`){return t=>{if(t&&!r(t))return e}}function c(e=`Please enter a valid phone number`){return t=>{if(t&&!i(t))return e}}function l(e,t){return n=>{if(n&&n.trim().length<e)return t||`Must be at least ${e} characters`}}function u(...e){return t=>{for(let n of e){let e=n(t);if(e)return e}}}o(`Name is required`),o(`Email is required`),s(),o(`Message is required`);const d={name:u(o(`Name is required`),l(2,`Name must be at least 2 characters`)),email:u(o(`Email is required`),s()),phone:u(o(`Phone number is required`),c()),address:u(o(`Address is required`),l(10,`Please enter a complete address`))};function f(e){return!e||!Array.isArray(e)||e.length===0?0:e.reduce((e,t)=>e+(t.price??0)*(t.quantity??0),0)}function p(e){return`$${e.toFixed(2)}`}var m=t();function h({products:e,onSubmit:t}){let[r,i]=(0,n.useState)({name:``,email:``,phone:``,address:``}),[a,o]=(0,n.useState)({}),[s,c]=(0,n.useState)({}),[l,u]=(0,n.useState)({name:!1,email:!1,phone:!1,address:!1}),[h,g]=(0,n.useState)(`idle`),[_,v]=(0,n.useState)(``),y=(0,n.useMemo)(()=>e.filter(e=>(a[e.id]||0)>0).map(e=>({productId:e.id,quantity:a[e.id]||0,price:e.price})),[e,a]),b=(0,n.useMemo)(()=>f(y),[y]),x=y.length>0,S=(0,n.useCallback)((e,t)=>{let n=d[e];return n(t)},[]),C=(0,n.useCallback)(()=>{let e={},t=S(`name`,r.name);t&&(e.name=t);let n=S(`email`,r.email);n&&(e.email=n);let i=S(`phone`,r.phone);i&&(e.phone=i);let a=S(`address`,r.address);return a&&(e.address=a),x||(e.products=`Please select at least one product`),e},[r,S,x]),w=(0,n.useCallback)((e,t)=>{if(i(n=>({...n,[e]:t})),l[e]){let n=S(e,t);c(t=>({...t,[e]:n}))}},[l,S]),T=(0,n.useCallback)(e=>{u(t=>({...t,[e]:!0}));let t=S(e,r[e]);c(n=>({...n,[e]:t}))},[r,S]),E=(0,n.useCallback)((e,t)=>{let n=Math.max(0,Math.floor(t));o(t=>({...t,[e]:n})),s.products&&c(e=>({...e,products:void 0}))},[s.products]),D=(0,n.useCallback)(e=>{o(t=>({...t,[e]:(t[e]||0)+1})),s.products&&c(e=>({...e,products:void 0}))},[s.products]),O=(0,n.useCallback)(e=>{o(t=>({...t,[e]:Math.max(0,(t[e]||0)-1)}))},[]),k=(0,n.useCallback)(async e=>{e.preventDefault(),u({name:!0,email:!0,phone:!0,address:!0});let n=C();if(c(n),!(Object.keys(n).length>0)){g(`submitting`),v(``);try{let e={customer:r,items:y,total:b,timestamp:new Date().toISOString()};t?await t(e):await new Promise(e=>setTimeout(e,1500)),g(`success`),i({name:``,email:``,phone:``,address:``}),o({}),u({name:!1,email:!1,phone:!1,address:!1}),c({})}catch(e){g(`error`),v(e instanceof Error?e.message:`Something went wrong. Please try again later.`)}}},[r,y,b,C,t]),A=(0,n.useCallback)(()=>{g(`idle`)},[]),j=h===`submitting`,M=(0,n.useMemo)(()=>{let t={};return e.filter(e=>e.available).forEach(e=>{t[e.category]||(t[e.category]=[]),t[e.category].push(e)}),t},[e]);return(0,m.jsx)(`section`,{id:`order`,className:`py-12 sm:py-16 md:py-24 bg-gradient-to-b from-pastel-cream/30 to-white`,"aria-labelledby":`order-heading`,children:(0,m.jsxs)(`div`,{className:`container mx-auto px-3 sm:px-4`,children:[(0,m.jsxs)(`div`,{className:`text-center mb-8 sm:mb-12 md:mb-16`,children:[(0,m.jsx)(`h2`,{id:`order-heading`,className:`font-heading text-3xl sm:text-4xl md:text-5xl font-bold text-brand-dark mb-3 sm:mb-4`,children:`Place Your Order`}),(0,m.jsx)(`p`,{className:`font-body text-base sm:text-lg text-brand-dark/70 max-w-2xl mx-auto px-2`,children:`Select your favorite sweets and we'll have them ready for you!`})]}),h===`success`&&(0,m.jsxs)(`div`,{className:`max-w-4xl mx-auto mb-8 p-6 bg-green-50 border border-green-200 rounded-2xl flex items-start gap-4`,role:`alert`,"aria-live":`polite`,children:[(0,m.jsx)(`div`,{className:`w-12 h-12 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0`,children:(0,m.jsx)(`svg`,{className:`w-6 h-6 text-green-600`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,m.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z`})})}),(0,m.jsxs)(`div`,{className:`flex-1`,children:[(0,m.jsx)(`p`,{className:`font-heading text-xl font-semibold text-green-800`,children:`Order Placed Successfully!`}),(0,m.jsx)(`p`,{className:`font-body text-green-700 mt-1`,children:`Thank you for your order! We'll contact you shortly to confirm the details.`})]}),(0,m.jsx)(`button`,{onClick:A,className:`text-green-600 hover:text-green-800 transition-colors p-2`,"aria-label":`Dismiss success message`,children:(0,m.jsx)(`svg`,{className:`w-5 h-5`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,m.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M6 18L18 6M6 6l12 12`})})})]}),h===`error`&&(0,m.jsxs)(`div`,{className:`max-w-4xl mx-auto mb-8 p-6 bg-red-50 border border-red-200 rounded-2xl flex items-start gap-4`,role:`alert`,"aria-live":`polite`,children:[(0,m.jsx)(`div`,{className:`w-12 h-12 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0`,children:(0,m.jsx)(`svg`,{className:`w-6 h-6 text-red-600`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,m.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z`})})}),(0,m.jsxs)(`div`,{className:`flex-1`,children:[(0,m.jsx)(`p`,{className:`font-heading text-xl font-semibold text-red-800`,children:`Order Failed`}),(0,m.jsx)(`p`,{className:`font-body text-red-700 mt-1`,children:_})]})]}),(0,m.jsx)(`form`,{onSubmit:k,noValidate:!0,className:`max-w-6xl mx-auto`,children:(0,m.jsxs)(`div`,{className:`grid lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8`,children:[(0,m.jsx)(`div`,{className:`lg:col-span-2 space-y-4 sm:space-y-6 lg:space-y-8`,children:(0,m.jsxs)(`div`,{className:`bg-white rounded-2xl p-4 sm:p-6 md:p-8 shadow-lg`,children:[(0,m.jsxs)(`h3`,{className:`font-heading text-xl sm:text-2xl font-semibold text-brand-dark mb-4 sm:mb-6 flex items-center gap-2 sm:gap-3`,children:[(0,m.jsx)(`span`,{className:`w-7 h-7 sm:w-8 sm:h-8 bg-pastel-pink rounded-full flex items-center justify-center text-accent-coral font-bold text-xs sm:text-sm`,children:`1`}),`Select Your Sweets`]}),s.products&&(0,m.jsx)(`div`,{className:`mb-6 p-4 bg-red-50 border border-red-200 rounded-xl`,role:`alert`,children:(0,m.jsxs)(`p`,{className:`text-red-600 font-body flex items-center gap-2`,children:[(0,m.jsx)(`svg`,{className:`w-5 h-5`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,m.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z`})}),s.products]})}),Object.entries(M).map(([e,t])=>(0,m.jsxs)(`div`,{className:`mb-6 sm:mb-8 last:mb-0`,children:[(0,m.jsx)(`h4`,{className:`font-heading text-base sm:text-lg font-semibold text-brand-dark mb-3 sm:mb-4 pb-2 border-b border-gray-100`,children:e}),(0,m.jsx)(`div`,{className:`space-y-2 sm:space-y-3`,children:t.map(e=>(0,m.jsxs)(`div`,{className:`flex items-center gap-3 p-3 sm:p-4 rounded-xl bg-pastel-cream/30 hover:bg-pastel-cream/50 transition-colors`,children:[(0,m.jsx)(`div`,{className:`w-14 h-14 sm:w-16 sm:h-16 rounded-lg overflow-hidden bg-gray-100 flex-shrink-0`,children:(0,m.jsx)(`img`,{src:e.image,alt:e.name,className:`w-full h-full object-cover`,loading:`lazy`,onError:e=>{let t=e.target;t.src=`/images/placeholder.jpg`}})}),(0,m.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,m.jsx)(`h5`,{className:`font-heading font-semibold text-brand-dark text-sm sm:text-base truncate`,children:e.name}),(0,m.jsx)(`p`,{className:`font-heading font-bold text-accent-coral text-sm sm:text-base`,children:p(e.price)})]}),(0,m.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,m.jsx)(`button`,{type:`button`,onClick:()=>O(e.id),disabled:j||(a[e.id]||0)===0,className:`w-9 h-9 sm:w-11 sm:h-11 min-w-[36px] min-h-[36px] sm:min-w-[44px] sm:min-h-[44px] rounded-lg bg-white border-2 border-gray-200 
                                flex items-center justify-center text-brand-dark
                                hover:border-accent-coral hover:text-accent-coral
                                disabled:opacity-50 disabled:cursor-not-allowed
                                transition-colors`,"aria-label":`Decrease quantity of ${e.name}`,children:(0,m.jsx)(`svg`,{className:`w-3 h-3 sm:w-4 sm:h-4`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,m.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M20 12H4`})})}),(0,m.jsx)(`input`,{type:`number`,min:`0`,value:a[e.id]||0,onChange:t=>E(e.id,parseInt(t.target.value)||0),disabled:j,className:`w-10 sm:w-14 h-9 sm:h-11 min-h-[36px] sm:min-h-[44px] text-center rounded-lg border-2 border-gray-200 
                                font-heading font-semibold text-brand-dark text-sm sm:text-base
                                focus:outline-none focus:border-accent-coral
                                disabled:bg-gray-100 disabled:cursor-not-allowed`,"aria-label":`Quantity of ${e.name}`}),(0,m.jsx)(`button`,{type:`button`,onClick:()=>D(e.id),disabled:j,className:`w-9 h-9 sm:w-11 sm:h-11 min-w-[36px] min-h-[36px] sm:min-w-[44px] sm:min-h-[44px] rounded-lg bg-accent-coral text-white
                                flex items-center justify-center
                                hover:bg-accent-coral/90
                                disabled:opacity-50 disabled:cursor-not-allowed
                                transition-colors`,"aria-label":`Increase quantity of ${e.name}`,children:(0,m.jsx)(`svg`,{className:`w-3 h-3 sm:w-4 sm:h-4`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,m.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M12 4v16m8-8H4`})})})]})]},e.id))})]},e))]})}),(0,m.jsxs)(`div`,{className:`space-y-4 sm:space-y-6`,children:[(0,m.jsxs)(`div`,{className:`bg-white rounded-2xl p-4 sm:p-6 md:p-8 shadow-lg`,children:[(0,m.jsxs)(`h3`,{className:`font-heading text-xl sm:text-2xl font-semibold text-brand-dark mb-4 sm:mb-6 flex items-center gap-2 sm:gap-3`,children:[(0,m.jsx)(`span`,{className:`w-7 h-7 sm:w-8 sm:h-8 bg-pastel-peach rounded-full flex items-center justify-center text-accent-gold font-bold text-xs sm:text-sm`,children:`2`}),`Your Details`]}),(0,m.jsxs)(`div`,{className:`mb-4 sm:mb-5`,children:[(0,m.jsxs)(`label`,{htmlFor:`order-name`,className:`block font-heading font-semibold text-brand-dark mb-1.5 sm:mb-2 text-sm sm:text-base`,children:[`Name `,(0,m.jsx)(`span`,{className:`text-accent-coral`,children:`*`})]}),(0,m.jsx)(`input`,{type:`text`,id:`order-name`,name:`name`,value:r.name,onChange:e=>w(`name`,e.target.value),onBlur:()=>T(`name`),disabled:j,className:`w-full px-3 sm:px-4 py-2.5 sm:py-3 rounded-xl border-2 font-body text-brand-dark text-sm sm:text-base
                      placeholder:text-brand-dark/40 transition-all duration-200
                      focus:outline-none focus:ring-2 focus:ring-accent-coral/20
                      disabled:bg-gray-100 disabled:cursor-not-allowed
                      ${s.name&&l.name?`border-red-400 focus:border-red-400`:`border-gray-200 focus:border-accent-coral`}`,placeholder:`Your full name`,"aria-required":`true`,"aria-invalid":s.name&&l.name?`true`:`false`,"aria-describedby":s.name&&l.name?`order-name-error`:void 0}),s.name&&l.name&&(0,m.jsx)(`p`,{id:`order-name-error`,className:`mt-1.5 sm:mt-2 text-xs sm:text-sm text-red-600 font-body`,role:`alert`,children:s.name})]}),(0,m.jsxs)(`div`,{className:`mb-4 sm:mb-5`,children:[(0,m.jsxs)(`label`,{htmlFor:`order-email`,className:`block font-heading font-semibold text-brand-dark mb-1.5 sm:mb-2 text-sm sm:text-base`,children:[`Email `,(0,m.jsx)(`span`,{className:`text-accent-coral`,children:`*`})]}),(0,m.jsx)(`input`,{type:`email`,id:`order-email`,name:`email`,value:r.email,onChange:e=>w(`email`,e.target.value),onBlur:()=>T(`email`),disabled:j,className:`w-full px-3 sm:px-4 py-2.5 sm:py-3 rounded-xl border-2 font-body text-brand-dark text-sm sm:text-base
                      placeholder:text-brand-dark/40 transition-all duration-200
                      focus:outline-none focus:ring-2 focus:ring-accent-coral/20
                      disabled:bg-gray-100 disabled:cursor-not-allowed
                      ${s.email&&l.email?`border-red-400 focus:border-red-400`:`border-gray-200 focus:border-accent-coral`}`,placeholder:`your.email@example.com`,"aria-required":`true`,"aria-invalid":s.email&&l.email?`true`:`false`,"aria-describedby":s.email&&l.email?`order-email-error`:void 0}),s.email&&l.email&&(0,m.jsx)(`p`,{id:`order-email-error`,className:`mt-1.5 sm:mt-2 text-xs sm:text-sm text-red-600 font-body`,role:`alert`,children:s.email})]}),(0,m.jsxs)(`div`,{className:`mb-4 sm:mb-5`,children:[(0,m.jsxs)(`label`,{htmlFor:`order-phone`,className:`block font-heading font-semibold text-brand-dark mb-1.5 sm:mb-2 text-sm sm:text-base`,children:[`Phone `,(0,m.jsx)(`span`,{className:`text-accent-coral`,children:`*`})]}),(0,m.jsx)(`input`,{type:`tel`,id:`order-phone`,name:`phone`,value:r.phone,onChange:e=>w(`phone`,e.target.value),onBlur:()=>T(`phone`),disabled:j,className:`w-full px-3 sm:px-4 py-2.5 sm:py-3 rounded-xl border-2 font-body text-brand-dark text-sm sm:text-base
                      placeholder:text-brand-dark/40 transition-all duration-200
                      focus:outline-none focus:ring-2 focus:ring-accent-coral/20
                      disabled:bg-gray-100 disabled:cursor-not-allowed
                      ${s.phone&&l.phone?`border-red-400 focus:border-red-400`:`border-gray-200 focus:border-accent-coral`}`,placeholder:`(123) 456-7890`,"aria-required":`true`,"aria-invalid":s.phone&&l.phone?`true`:`false`,"aria-describedby":s.phone&&l.phone?`order-phone-error`:void 0}),s.phone&&l.phone&&(0,m.jsx)(`p`,{id:`order-phone-error`,className:`mt-1.5 sm:mt-2 text-xs sm:text-sm text-red-600 font-body`,role:`alert`,children:s.phone})]}),(0,m.jsxs)(`div`,{children:[(0,m.jsxs)(`label`,{htmlFor:`order-address`,className:`block font-heading font-semibold text-brand-dark mb-1.5 sm:mb-2 text-sm sm:text-base`,children:[`Delivery Address `,(0,m.jsx)(`span`,{className:`text-accent-coral`,children:`*`})]}),(0,m.jsx)(`textarea`,{id:`order-address`,name:`address`,value:r.address,onChange:e=>w(`address`,e.target.value),onBlur:()=>T(`address`),disabled:j,rows:2,className:`w-full px-3 sm:px-4 py-2.5 sm:py-3 rounded-xl border-2 font-body text-brand-dark text-sm sm:text-base
                      placeholder:text-brand-dark/40 transition-all duration-200 resize-none
                      focus:outline-none focus:ring-2 focus:ring-accent-coral/20
                      disabled:bg-gray-100 disabled:cursor-not-allowed
                      ${s.address&&l.address?`border-red-400 focus:border-red-400`:`border-gray-200 focus:border-accent-coral`}`,placeholder:`Enter your full delivery address`,"aria-required":`true`,"aria-invalid":s.address&&l.address?`true`:`false`,"aria-describedby":s.address&&l.address?`order-address-error`:void 0}),s.address&&l.address&&(0,m.jsx)(`p`,{id:`order-address-error`,className:`mt-1.5 sm:mt-2 text-xs sm:text-sm text-red-600 font-body`,role:`alert`,children:s.address})]})]}),(0,m.jsxs)(`div`,{className:`bg-white rounded-2xl p-4 sm:p-6 md:p-8 shadow-lg`,children:[(0,m.jsxs)(`h3`,{className:`font-heading text-xl sm:text-2xl font-semibold text-brand-dark mb-4 sm:mb-6 flex items-center gap-2 sm:gap-3`,children:[(0,m.jsx)(`span`,{className:`w-7 h-7 sm:w-8 sm:h-8 bg-pastel-lavender rounded-full flex items-center justify-center text-accent-teal font-bold text-xs sm:text-sm`,children:`3`}),`Order Summary`]}),y.length===0?(0,m.jsx)(`p`,{className:`font-body text-brand-dark/60 text-center py-4`,children:`No items selected yet`}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(`div`,{className:`space-y-3 mb-6`,children:y.map(t=>{let n=e.find(e=>e.id===t.productId);return n?(0,m.jsxs)(`div`,{className:`flex justify-between items-center py-2 border-b border-gray-100 last:border-0`,children:[(0,m.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,m.jsx)(`p`,{className:`font-heading font-medium text-brand-dark truncate`,children:n.name}),(0,m.jsxs)(`p`,{className:`font-body text-sm text-brand-dark/60`,children:[p(t.price),` Ã— `,t.quantity]})]}),(0,m.jsx)(`p`,{className:`font-heading font-semibold text-brand-dark ml-4`,children:p(t.price*t.quantity)})]},t.productId):null})}),(0,m.jsx)(`div`,{className:`pt-4 border-t-2 border-gray-200`,children:(0,m.jsxs)(`div`,{className:`flex justify-between items-center`,children:[(0,m.jsx)(`p`,{className:`font-heading text-xl font-bold text-brand-dark`,children:`Total`}),(0,m.jsx)(`p`,{className:`font-heading text-2xl font-bold text-accent-coral`,children:p(b)})]})})]})]}),(0,m.jsx)(`button`,{type:`submit`,disabled:j,className:`w-full py-3 sm:py-4 px-4 sm:px-6 min-h-[44px] bg-accent-coral text-white font-heading font-semibold text-base sm:text-lg
                  rounded-xl shadow-lg hover:bg-accent-coral/90 hover:shadow-xl
                  focus:outline-none focus:ring-2 focus:ring-accent-coral focus:ring-offset-2
                  disabled:bg-gray-400 disabled:cursor-not-allowed disabled:shadow-none
                  transition-all duration-200 flex items-center justify-center gap-2`,children:j?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(`svg`,{className:`animate-spin h-5 w-5 text-white`,xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`,"aria-hidden":`true`,children:[(0,m.jsx)(`circle`,{className:`opacity-25`,cx:`12`,cy:`12`,r:`10`,stroke:`currentColor`,strokeWidth:`4`}),(0,m.jsx)(`path`,{className:`opacity-75`,fill:`currentColor`,d:`M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z`})]}),(0,m.jsx)(`span`,{children:`Processing Order...`})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(`span`,{children:`Place Order`}),(0,m.jsx)(`svg`,{className:`w-5 h-5`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,m.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M5 13l4 4L19 7`})})]})})]})]})})]})})}var g=h;export{h as OrderForm,g as default};