import{n as e,t}from"./index-BtOCwi8n.js";import{n}from"./useFormValidation-NHBfZT0R.js";var r=e();function i(e){return!e||!Array.isArray(e)||e.length===0?0:e.reduce((e,t)=>e+(t.price??0)*(t.quantity??0),0)}function a(e){return`$${e.toFixed(2)}`}var o=t();function s({products:e,onSubmit:t}){let[s,c]=(0,r.useState)({name:``,email:``,phone:``,address:``}),[l,u]=(0,r.useState)({}),[d,f]=(0,r.useState)({}),[p,m]=(0,r.useState)({name:!1,email:!1,phone:!1,address:!1}),[h,g]=(0,r.useState)(`idle`),[_,v]=(0,r.useState)(``),y=(0,r.useMemo)(()=>e.filter(e=>(l[e.id]||0)>0).map(e=>({productId:e.id,quantity:l[e.id]||0,price:e.price})),[e,l]),b=(0,r.useMemo)(()=>i(y),[y]),x=y.length>0,S=(0,r.useCallback)((e,t)=>{let r=n[e];return r(t)},[]),C=(0,r.useCallback)(()=>{let e={},t=S(`name`,s.name);t&&(e.name=t);let n=S(`email`,s.email);n&&(e.email=n);let r=S(`phone`,s.phone);r&&(e.phone=r);let i=S(`address`,s.address);return i&&(e.address=i),x||(e.products=`Please select at least one product`),e},[s,S,x]),w=(0,r.useCallback)((e,t)=>{if(c(n=>({...n,[e]:t})),p[e]){let n=S(e,t);f(t=>({...t,[e]:n}))}},[p,S]),T=(0,r.useCallback)(e=>{m(t=>({...t,[e]:!0}));let t=S(e,s[e]);f(n=>({...n,[e]:t}))},[s,S]),E=(0,r.useCallback)((e,t)=>{let n=Math.max(0,Math.floor(t));u(t=>({...t,[e]:n})),d.products&&f(e=>({...e,products:void 0}))},[d.products]),D=(0,r.useCallback)(e=>{u(t=>({...t,[e]:(t[e]||0)+1})),d.products&&f(e=>({...e,products:void 0}))},[d.products]),O=(0,r.useCallback)(e=>{u(t=>({...t,[e]:Math.max(0,(t[e]||0)-1)}))},[]),k=(0,r.useCallback)(async e=>{e.preventDefault(),m({name:!0,email:!0,phone:!0,address:!0});let n=C();if(f(n),!(Object.keys(n).length>0)){g(`submitting`),v(``);try{let e={customer:s,items:y,total:b,timestamp:new Date().toISOString()};t?await t(e):await new Promise(e=>setTimeout(e,1500)),g(`success`),c({name:``,email:``,phone:``,address:``}),u({}),m({name:!1,email:!1,phone:!1,address:!1}),f({})}catch(e){g(`error`),v(e instanceof Error?e.message:`Something went wrong. Please try again later.`)}}},[s,y,b,C,t]),A=(0,r.useCallback)(()=>{g(`idle`)},[]),j=h===`submitting`,M=(0,r.useMemo)(()=>{let t={};return e.filter(e=>e.available).forEach(e=>{t[e.category]||(t[e.category]=[]),t[e.category].push(e)}),t},[e]);return(0,o.jsx)(`section`,{id:`order`,className:`py-12 sm:py-16 md:py-24 bg-gradient-to-b from-pastel-cream/30 to-white`,"aria-labelledby":`order-heading`,children:(0,o.jsxs)(`div`,{className:`container mx-auto px-3 sm:px-4`,children:[(0,o.jsxs)(`div`,{className:`text-center mb-8 sm:mb-12 md:mb-16`,children:[(0,o.jsx)(`h2`,{id:`order-heading`,className:`font-heading text-3xl sm:text-4xl md:text-5xl font-bold text-brand-dark mb-3 sm:mb-4`,children:`Place Your Order`}),(0,o.jsx)(`p`,{className:`font-body text-base sm:text-lg text-brand-dark/70 max-w-2xl mx-auto px-2`,children:`Select your favorite sweets and we'll have them ready for you!`})]}),h===`success`&&(0,o.jsxs)(`div`,{className:`max-w-4xl mx-auto mb-8 p-6 bg-green-50 border border-green-200 rounded-2xl flex items-start gap-4`,role:`alert`,"aria-live":`polite`,children:[(0,o.jsx)(`div`,{className:`w-12 h-12 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0`,children:(0,o.jsx)(`svg`,{className:`w-6 h-6 text-green-600`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,o.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z`})})}),(0,o.jsxs)(`div`,{className:`flex-1`,children:[(0,o.jsx)(`p`,{className:`font-heading text-xl font-semibold text-green-800`,children:`Order Placed Successfully!`}),(0,o.jsx)(`p`,{className:`font-body text-green-700 mt-1`,children:`Thank you for your order! We'll contact you shortly to confirm the details.`})]}),(0,o.jsx)(`button`,{onClick:A,className:`text-green-600 hover:text-green-800 transition-colors p-2`,"aria-label":`Dismiss success message`,children:(0,o.jsx)(`svg`,{className:`w-5 h-5`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,o.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M6 18L18 6M6 6l12 12`})})})]}),h===`error`&&(0,o.jsxs)(`div`,{className:`max-w-4xl mx-auto mb-8 p-6 bg-red-50 border border-red-200 rounded-2xl flex items-start gap-4`,role:`alert`,"aria-live":`polite`,children:[(0,o.jsx)(`div`,{className:`w-12 h-12 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0`,children:(0,o.jsx)(`svg`,{className:`w-6 h-6 text-red-600`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,o.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z`})})}),(0,o.jsxs)(`div`,{className:`flex-1`,children:[(0,o.jsx)(`p`,{className:`font-heading text-xl font-semibold text-red-800`,children:`Order Failed`}),(0,o.jsx)(`p`,{className:`font-body text-red-700 mt-1`,children:_})]})]}),(0,o.jsx)(`form`,{onSubmit:k,noValidate:!0,className:`max-w-6xl mx-auto`,children:(0,o.jsxs)(`div`,{className:`grid lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8`,children:[(0,o.jsx)(`div`,{className:`lg:col-span-2 space-y-4 sm:space-y-6 lg:space-y-8`,children:(0,o.jsxs)(`div`,{className:`bg-white rounded-2xl p-4 sm:p-6 md:p-8 shadow-lg`,children:[(0,o.jsxs)(`h3`,{className:`font-heading text-xl sm:text-2xl font-semibold text-brand-dark mb-4 sm:mb-6 flex items-center gap-2 sm:gap-3`,children:[(0,o.jsx)(`span`,{className:`w-7 h-7 sm:w-8 sm:h-8 bg-pastel-pink rounded-full flex items-center justify-center text-accent-coral font-bold text-xs sm:text-sm`,children:`1`}),`Select Your Sweets`]}),d.products&&(0,o.jsx)(`div`,{className:`mb-6 p-4 bg-red-50 border border-red-200 rounded-xl`,role:`alert`,children:(0,o.jsxs)(`p`,{className:`text-red-600 font-body flex items-center gap-2`,children:[(0,o.jsx)(`svg`,{className:`w-5 h-5`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,o.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z`})}),d.products]})}),Object.entries(M).map(([e,t])=>(0,o.jsxs)(`div`,{className:`mb-6 sm:mb-8 last:mb-0`,children:[(0,o.jsx)(`h4`,{className:`font-heading text-base sm:text-lg font-semibold text-brand-dark mb-3 sm:mb-4 pb-2 border-b border-gray-100`,children:e}),(0,o.jsx)(`div`,{className:`space-y-2 sm:space-y-3`,children:t.map(e=>(0,o.jsxs)(`div`,{className:`flex items-center gap-3 p-3 sm:p-4 rounded-xl bg-pastel-cream/30 hover:bg-pastel-cream/50 transition-colors`,children:[(0,o.jsx)(`div`,{className:`w-14 h-14 sm:w-16 sm:h-16 rounded-lg overflow-hidden bg-gray-100 flex-shrink-0`,children:(0,o.jsx)(`img`,{src:e.image,alt:e.name,className:`w-full h-full object-cover`,loading:`lazy`,onError:e=>{let t=e.target;t.src=`/images/placeholder.jpg`}})}),(0,o.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,o.jsx)(`h5`,{className:`font-heading font-semibold text-brand-dark text-sm sm:text-base truncate`,children:e.name}),(0,o.jsx)(`p`,{className:`font-heading font-bold text-accent-coral text-sm sm:text-base`,children:a(e.price)})]}),(0,o.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,o.jsx)(`button`,{type:`button`,onClick:()=>O(e.id),disabled:j||(l[e.id]||0)===0,className:`w-9 h-9 sm:w-11 sm:h-11 min-w-[36px] min-h-[36px] sm:min-w-[44px] sm:min-h-[44px] rounded-lg bg-white border-2 border-gray-200 
                                flex items-center justify-center text-brand-dark
                                hover:border-accent-coral hover:text-accent-coral
                                disabled:opacity-50 disabled:cursor-not-allowed
                                transition-colors`,"aria-label":`Decrease quantity of ${e.name}`,children:(0,o.jsx)(`svg`,{className:`w-3 h-3 sm:w-4 sm:h-4`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,o.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M20 12H4`})})}),(0,o.jsx)(`input`,{type:`number`,min:`0`,value:l[e.id]||0,onChange:t=>E(e.id,parseInt(t.target.value)||0),disabled:j,className:`w-10 sm:w-14 h-9 sm:h-11 min-h-[36px] sm:min-h-[44px] text-center rounded-lg border-2 border-gray-200 
                                font-heading font-semibold text-brand-dark text-sm sm:text-base
                                focus:outline-none focus:border-accent-coral
                                disabled:bg-gray-100 disabled:cursor-not-allowed`,"aria-label":`Quantity of ${e.name}`}),(0,o.jsx)(`button`,{type:`button`,onClick:()=>D(e.id),disabled:j,className:`w-9 h-9 sm:w-11 sm:h-11 min-w-[36px] min-h-[36px] sm:min-w-[44px] sm:min-h-[44px] rounded-lg bg-accent-coral text-white
                                flex items-center justify-center
                                hover:bg-accent-coral/90
                                disabled:opacity-50 disabled:cursor-not-allowed
                                transition-colors`,"aria-label":`Increase quantity of ${e.name}`,children:(0,o.jsx)(`svg`,{className:`w-3 h-3 sm:w-4 sm:h-4`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,o.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M12 4v16m8-8H4`})})})]})]},e.id))})]},e))]})}),(0,o.jsxs)(`div`,{className:`space-y-4 sm:space-y-6`,children:[(0,o.jsxs)(`div`,{className:`bg-white rounded-2xl p-4 sm:p-6 md:p-8 shadow-lg`,children:[(0,o.jsxs)(`h3`,{className:`font-heading text-xl sm:text-2xl font-semibold text-brand-dark mb-4 sm:mb-6 flex items-center gap-2 sm:gap-3`,children:[(0,o.jsx)(`span`,{className:`w-7 h-7 sm:w-8 sm:h-8 bg-pastel-peach rounded-full flex items-center justify-center text-accent-gold font-bold text-xs sm:text-sm`,children:`2`}),`Your Details`]}),(0,o.jsxs)(`div`,{className:`mb-4 sm:mb-5`,children:[(0,o.jsxs)(`label`,{htmlFor:`order-name`,className:`block font-heading font-semibold text-brand-dark mb-1.5 sm:mb-2 text-sm sm:text-base`,children:[`Name `,(0,o.jsx)(`span`,{className:`text-accent-coral`,children:`*`})]}),(0,o.jsx)(`input`,{type:`text`,id:`order-name`,name:`name`,value:s.name,onChange:e=>w(`name`,e.target.value),onBlur:()=>T(`name`),disabled:j,className:`w-full px-3 sm:px-4 py-2.5 sm:py-3 rounded-xl border-2 font-body text-brand-dark text-sm sm:text-base
                      placeholder:text-brand-dark/40 transition-all duration-200
                      focus:outline-none focus:ring-2 focus:ring-accent-coral/20
                      disabled:bg-gray-100 disabled:cursor-not-allowed
                      ${d.name&&p.name?`border-red-400 focus:border-red-400`:`border-gray-200 focus:border-accent-coral`}`,placeholder:`Your full name`,"aria-required":`true`,"aria-invalid":d.name&&p.name?`true`:`false`,"aria-describedby":d.name&&p.name?`order-name-error`:void 0}),d.name&&p.name&&(0,o.jsx)(`p`,{id:`order-name-error`,className:`mt-1.5 sm:mt-2 text-xs sm:text-sm text-red-600 font-body`,role:`alert`,children:d.name})]}),(0,o.jsxs)(`div`,{className:`mb-4 sm:mb-5`,children:[(0,o.jsxs)(`label`,{htmlFor:`order-email`,className:`block font-heading font-semibold text-brand-dark mb-1.5 sm:mb-2 text-sm sm:text-base`,children:[`Email `,(0,o.jsx)(`span`,{className:`text-accent-coral`,children:`*`})]}),(0,o.jsx)(`input`,{type:`email`,id:`order-email`,name:`email`,value:s.email,onChange:e=>w(`email`,e.target.value),onBlur:()=>T(`email`),disabled:j,className:`w-full px-3 sm:px-4 py-2.5 sm:py-3 rounded-xl border-2 font-body text-brand-dark text-sm sm:text-base
                      placeholder:text-brand-dark/40 transition-all duration-200
                      focus:outline-none focus:ring-2 focus:ring-accent-coral/20
                      disabled:bg-gray-100 disabled:cursor-not-allowed
                      ${d.email&&p.email?`border-red-400 focus:border-red-400`:`border-gray-200 focus:border-accent-coral`}`,placeholder:`your.email@example.com`,"aria-required":`true`,"aria-invalid":d.email&&p.email?`true`:`false`,"aria-describedby":d.email&&p.email?`order-email-error`:void 0}),d.email&&p.email&&(0,o.jsx)(`p`,{id:`order-email-error`,className:`mt-1.5 sm:mt-2 text-xs sm:text-sm text-red-600 font-body`,role:`alert`,children:d.email})]}),(0,o.jsxs)(`div`,{className:`mb-4 sm:mb-5`,children:[(0,o.jsxs)(`label`,{htmlFor:`order-phone`,className:`block font-heading font-semibold text-brand-dark mb-1.5 sm:mb-2 text-sm sm:text-base`,children:[`Phone `,(0,o.jsx)(`span`,{className:`text-accent-coral`,children:`*`})]}),(0,o.jsx)(`input`,{type:`tel`,id:`order-phone`,name:`phone`,value:s.phone,onChange:e=>w(`phone`,e.target.value),onBlur:()=>T(`phone`),disabled:j,className:`w-full px-3 sm:px-4 py-2.5 sm:py-3 rounded-xl border-2 font-body text-brand-dark text-sm sm:text-base
                      placeholder:text-brand-dark/40 transition-all duration-200
                      focus:outline-none focus:ring-2 focus:ring-accent-coral/20
                      disabled:bg-gray-100 disabled:cursor-not-allowed
                      ${d.phone&&p.phone?`border-red-400 focus:border-red-400`:`border-gray-200 focus:border-accent-coral`}`,placeholder:`(123) 456-7890`,"aria-required":`true`,"aria-invalid":d.phone&&p.phone?`true`:`false`,"aria-describedby":d.phone&&p.phone?`order-phone-error`:void 0}),d.phone&&p.phone&&(0,o.jsx)(`p`,{id:`order-phone-error`,className:`mt-1.5 sm:mt-2 text-xs sm:text-sm text-red-600 font-body`,role:`alert`,children:d.phone})]}),(0,o.jsxs)(`div`,{children:[(0,o.jsxs)(`label`,{htmlFor:`order-address`,className:`block font-heading font-semibold text-brand-dark mb-1.5 sm:mb-2 text-sm sm:text-base`,children:[`Delivery Address `,(0,o.jsx)(`span`,{className:`text-accent-coral`,children:`*`})]}),(0,o.jsx)(`textarea`,{id:`order-address`,name:`address`,value:s.address,onChange:e=>w(`address`,e.target.value),onBlur:()=>T(`address`),disabled:j,rows:2,className:`w-full px-3 sm:px-4 py-2.5 sm:py-3 rounded-xl border-2 font-body text-brand-dark text-sm sm:text-base
                      placeholder:text-brand-dark/40 transition-all duration-200 resize-none
                      focus:outline-none focus:ring-2 focus:ring-accent-coral/20
                      disabled:bg-gray-100 disabled:cursor-not-allowed
                      ${d.address&&p.address?`border-red-400 focus:border-red-400`:`border-gray-200 focus:border-accent-coral`}`,placeholder:`Enter your full delivery address`,"aria-required":`true`,"aria-invalid":d.address&&p.address?`true`:`false`,"aria-describedby":d.address&&p.address?`order-address-error`:void 0}),d.address&&p.address&&(0,o.jsx)(`p`,{id:`order-address-error`,className:`mt-1.5 sm:mt-2 text-xs sm:text-sm text-red-600 font-body`,role:`alert`,children:d.address})]})]}),(0,o.jsxs)(`div`,{className:`bg-white rounded-2xl p-4 sm:p-6 md:p-8 shadow-lg`,children:[(0,o.jsxs)(`h3`,{className:`font-heading text-xl sm:text-2xl font-semibold text-brand-dark mb-4 sm:mb-6 flex items-center gap-2 sm:gap-3`,children:[(0,o.jsx)(`span`,{className:`w-7 h-7 sm:w-8 sm:h-8 bg-pastel-lavender rounded-full flex items-center justify-center text-accent-teal font-bold text-xs sm:text-sm`,children:`3`}),`Order Summary`]}),y.length===0?(0,o.jsx)(`p`,{className:`font-body text-brand-dark/60 text-center py-4`,children:`No items selected yet`}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(`div`,{className:`space-y-3 mb-6`,children:y.map(t=>{let n=e.find(e=>e.id===t.productId);return n?(0,o.jsxs)(`div`,{className:`flex justify-between items-center py-2 border-b border-gray-100 last:border-0`,children:[(0,o.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,o.jsx)(`p`,{className:`font-heading font-medium text-brand-dark truncate`,children:n.name}),(0,o.jsxs)(`p`,{className:`font-body text-sm text-brand-dark/60`,children:[a(t.price),` Ã— `,t.quantity]})]}),(0,o.jsx)(`p`,{className:`font-heading font-semibold text-brand-dark ml-4`,children:a(t.price*t.quantity)})]},t.productId):null})}),(0,o.jsx)(`div`,{className:`pt-4 border-t-2 border-gray-200`,children:(0,o.jsxs)(`div`,{className:`flex justify-between items-center`,children:[(0,o.jsx)(`p`,{className:`font-heading text-xl font-bold text-brand-dark`,children:`Total`}),(0,o.jsx)(`p`,{className:`font-heading text-2xl font-bold text-accent-coral`,children:a(b)})]})})]})]}),(0,o.jsx)(`button`,{type:`submit`,disabled:j,className:`w-full py-3 sm:py-4 px-4 sm:px-6 min-h-[44px] bg-accent-coral text-white font-heading font-semibold text-base sm:text-lg
                  rounded-xl shadow-lg hover:bg-accent-coral/90 hover:shadow-xl
                  focus:outline-none focus:ring-2 focus:ring-accent-coral focus:ring-offset-2
                  disabled:bg-gray-400 disabled:cursor-not-allowed disabled:shadow-none
                  transition-all duration-200 flex items-center justify-center gap-2`,children:j?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(`svg`,{className:`animate-spin h-5 w-5 text-white`,xmlns:`http://www.w3.org/2000/svg`,fill:`none`,viewBox:`0 0 24 24`,"aria-hidden":`true`,children:[(0,o.jsx)(`circle`,{className:`opacity-25`,cx:`12`,cy:`12`,r:`10`,stroke:`currentColor`,strokeWidth:`4`}),(0,o.jsx)(`path`,{className:`opacity-75`,fill:`currentColor`,d:`M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z`})]}),(0,o.jsx)(`span`,{children:`Processing Order...`})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(`span`,{children:`Place Order`}),(0,o.jsx)(`svg`,{className:`w-5 h-5`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,o.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M5 13l4 4L19 7`})})]})})]})]})})]})})}var c=s;export{s as OrderForm,c as default};